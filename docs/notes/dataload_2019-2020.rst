
.. highlight:: rest

BISON data load Oct 2019
=======================
.. contents::  

.. _GBIF Data Processing: docs/notes/gbif_process.rst
.. _BISON-Provider Data Processing: docs/notes/provider_dataset_process.rst
.. _Common Data Processing: docs/notes/provider_dataset_process.rst

Overview Process
-----------------
   
BISON Data Provider Data Load
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Prior to Common Processing:

#. Process/sort the BISON-provider datasets, handling individual datasets 
   differently.  
#. Dataset categories:

   * Add new
   * Rename existing
   * Replace-and-rename existing
   * Replace existing
   * Rewrite existing

#. All *Add*, *Rename*, *Replace-and-rename* datasets will be represented by
   Jira tickets. *Add*, and *Replace-and-rename* datasets will be linked
   to tickets for processing.
#. All datasets encountered in existing data that do not have an action 
   requested by a Jira ticket, will be *Rewrite*
#. All datasets are processed individually, for ease of file transfer and debugging.
#. For BISON-provider-specific data processing see 
   `BISON-Provider Data Processing`_
#. Next, do `Common Data Processing`_
#. Compress the final processed dataset files into a single file for 
   upload/download.  Denver will uncompress and load each dataset individually.
#. After confirmation that the smoke-test data loads into the BISON staging 
   system correctly, provide the updated-BISON-provider-records to Denver for 
   ingest


GBIF Data Load
~~~~~~~~~~~~~~

#. Process a portion (~10 million records) of a GBIF data download for a "smoke test" 
   and provide to Denver for data load into BISON staging. 
#. Split the large downloaded data files into managable (10million records) chunks
#. On each, do GBIF-specific data processing: `GBIF Data Processing`_
#. Next, do `Common Data Processing`_
#. After confirmation that the smoke-test data loads into the BISON staging 
   system correctly, re-download GBIF US and Canada/US Territories datasets, and 
   process.
#. Provide the smaller, fully-processed 'chunk' files to Denver for ingest 